# ![logo](/docs/images/logo.png)

## **干将 是一个自动化插件式网络漏洞检测系统**

**受[巡风](https://github.com/ysrc/xunfeng)启发，凭借前期对目标的存活性探测、端口扫描、指纹识别等信息收集工作，自动调用内置漏洞检测插件，验证目标是否存在漏洞。**

### **系统架构图**

![系统架构图](/docs/images/framework.png)

### **主要技术**

- **Python**
- **Flask**
- **MongoDB**
- **JQuery**
- **Telnet**
- **Nmap**
- **Masscan**
- **Socket**
- **Multithreading**



### Sniper 进程

**主要负责目标的信息收集工作，为自动化调用插件提供依据**

1. 由用户选择是否进行 **目标存活性检测**(调用Nmap快速探测)
2. 使用Telnet/Nmap/Masscan技术之一进行**多线程/快速端口扫描**(TCP/UDP)
3. 使用Socket多线程**获取开放端口Banner指纹信息**
4. 一系列**服务识别**处理流程及**Web服务/容器/组件/语言**等信息的多线程识别
5. 根据插件信息及目标信息，**自动添加漏洞检测任务**

### Sanner 进程

**主要负责多线程插件调用工作，完成漏洞检测**

1. 区分并加载**Python脚本型插件**和**JSON文件型插件**
2. 多线程**调用插件**，**完成漏洞检测**工作

### Website 进程

**Flask web技术构建的网站，用来指导用户建立漏洞验证任务**

1. **配置目标/指纹信息及各种扫描参数**
2. **历史信息搜索/漏洞详情下载**
3. **Sniper进程与Scanner进程Console信息实时展示**

### 数据库

**使用 MongoDB数据库，维持/指导以上三个进程间的数据交互和行动**。



### 系统截图

![主页](/docs/images/home.png)



![主页](/docs/images/showing.png)



### To do list:

- 寻找改进Socke获取banner的方法(不稳定)
- 增加Nmap或其它方式，完成获取banner/判断服务类型的工作
- 继续完善Web服务检测部分
- 允许跳过信息探测，直接使用插件检测目标
- 增加域名形式的目标输入与检测
- 增加UDP端口扫描功能
- 允许从Web端操作漏洞检测插件
- 完善常见TCP/UDP端口渗透列表
- 增加完善编写各种插件
- 插件从服务器上拉取/更新
- 增加守护进程, website、sniper、scanner任意一个进程崩溃，就自动重启

